<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: daos/impl/redis/posts_dao_redis_impl.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: daos/impl/redis/posts_dao_redis_impl.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const redisClient = import("../../../config/redisClient.js")

/**
 * Insert a new post.
 *
 * @param {Object} post - a post object.
 * @returns {Promise} - a Promise, resolving to the string value
 *   for the key of the post Redis.
 */
const insert = async (post) => {
  // const client = redis.getClient();

  // const siteHashKey = keyGenerator.getSiteHashKey(site.id);

  // await client.hmsetAsync(siteHashKey, flatten(site));
  // await client.saddAsync(keyGenerator.getSiteIDsKey(), siteHashKey);

  // return siteHashKey;
};

/**
 * Get the site object for a given site ID.
 *
 * @param {number} id - a site ID.
 * @returns {Promise} - a Promise, resolving to a site object.
 */
const findById = async (id) => {
  // const client = redis.getClient();
  // const siteKey = keyGenerator.getSiteHashKey(id);

  // const siteHash = await client.hgetallAsync(siteKey);

  // return (siteHash === null ? siteHash : remap(siteHash));
};

/* eslint-disable arrow-body-style */
/**
 * Get an array of all post objects.
 *
 * @returns {Promise} - a Promise, resolving to an array of post objects.
 */
const findAll = async () => {
  // START CHALLENGE #1 (2024/04/05)
  // const client = redis.getClient();
  // const ids = await client.smembersAsync(keyGenerator.getSiteIDsKey());

  // let words = null; 
  // let id = null
  // let siteHash = null; 
  // let allSites = []; 

  // for (i=0; i&lt; ids.length; i++) {
  //   words = ids[i].split(':');
  //   id = words[words.length-1];
  //   //console.log(`id = ${id}`) 

  //   siteHash = await findById(id);
  //   //console.log('siteHash') 
  //   //console.log(siteHash)

  //   allSites.push(siteHash)
  //   //console.log(`loop allSites.length = ${allSites.length}`);
  //}
  
  //console.log(`final allSites.length = ${allSites.length}`);
  //return allSites;
  return [];    
  // End fix 
  // END CHALLENGE #1 (2024/04/05)
};
/* eslint-enable */

/* eslint-disable no-unused-vars */

module.exports = {
  insert,
  findById,
  findAll
};

/* eslint-enable no-unused-vars */
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addNumbers">addNumbers</a></li><li><a href="global.html#addNumbersAsync">addNumbersAsync</a></li><li><a href="global.html#disconnect">disconnect</a></li><li><a href="global.html#findAll">findAll</a></li><li><a href="global.html#findById">findById</a></li><li><a href="global.html#insert">insert</a></li><li><a href="global.html#loadDao">loadDao</a></li><li><a href="global.html#redisClient">redisClient</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Tue Aug 13 2024 15:44:00 GMT+0800 (China Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
